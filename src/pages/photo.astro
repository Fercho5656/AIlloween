---
import { Button } from "@/components/ui/button";
import Layout from "@/layouts/Layout.astro";
import { getCldImageUrl } from "astro-cloudinary/helpers";

const { searchParams } = Astro.url;
const id = searchParams.get("id");

if (id == null) return Astro.redirect("/");

const url = getCldImageUrl({ src: id });
console.log({ url });

import type { Costume } from "@/types/costume";
import costumes from "@/data/costumes.json";
console.log({ costumes });
---

<Layout title="Photo Booth">
  <main class="p-4">
    <div class="w-full h-64 flex gap-4">
      <div class="w-1/2 grid items-center">
        <img
          id="main-img"
          src={url}
          alt="Uploaded Image"
          class="w-full h-full object-cover rounded-sm"
        />
      </div>
      <div class="w-1/2">
        <div class="grid grid-cols-3 gap-4">
          {
            Object.entries(costumes).map(([category, items]) => (
              <div class="col-span-3">
                <h2 class="text-2xl font-bold">{category}</h2>
                <div class="grid grid-cols-3 gap-4">
                  {items.map((costume: Costume) => (
                    <div class="relative">
                      <img
                        src={url}
                        alt={costume.title}
                        title={costume.title}
                        class="w-full h-full rounded-sm object-cover cursor-pointer transition-transform hover:transform hover:scale-110 hover:rotate-6"
                        onclick=""
                      />
                    </div>
                  ))}
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </main>
</Layout>

<script></script>
